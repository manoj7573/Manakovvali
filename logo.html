<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Mana Kovvali</title>

  <link rel="stylesheet" href="style.css" />
     <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
    <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

</head>
<body>

  <header>
    <div class="container header-container">

      <h1> Mana Kovvali</h1>
      <nav id="navbar">
        <a href="index.html">Home</a>
        <a href="index.html#events">Events</a>

        <a href="jobs.html">Jobs</a>
        <a href="index.html#gallery">Gallery</a>
        <a href="schools.html">Schools</a>
        <a href="index.html#contact">Contact</a>
      </nav>
    </div>
  </header>

<div class="container mt-5">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 500px;">
    <div class="modal-content shadow border-0" style="background-color: #e0f7f5;">
      <div class="modal-header bg-success text-white">
        <h5 class="modal-title"><i class="fa fa-upload me-2"></i>Upload Your Logo</h5>
      </div>
      <div class="modal-body p-4">
        <form id="uploadForm" class="needs-validation" novalidate>
          <!-- Name -->
          <div class="mb-3">
            <label for="name" class="form-label fw-semibold text-success">Your Name</label>
            <input type="text" id="name" class="form-control border-success" placeholder="Enter your name" required>
            <div class="invalid-feedback">Please enter your name.</div>
          </div>

          <!-- Contact -->
          <div class="mb-3">
            <label for="contact" class="form-label fw-semibold text-success">Contact</label>
            <input type="text" id="contact" class="form-control border-success" placeholder="Enter contact details" required>
            <div class="invalid-feedback">Please enter your contact.</div>
          </div>

          <!-- Image Upload -->
          <div class="mb-3">
            <label for="image" class="form-label fw-semibold text-success">Select Image</label>
            <input type="file" id="image" class="form-control border-success" accept="image/*" required>
            <div class="invalid-feedback">Please select an image.</div>
          </div>
        </form>
      </div>

      <!-- Footer Buttons -->
      <div class="modal-footer">
        <button type="reset" form="uploadForm" class="btn btn-outline-secondary">
          <i class="fa fa-rotate-left me-1"></i> Reset
        </button>
        <button type="submit" form="uploadForm" class="btn btn-success">
          <i class="fa fa-paper-plane me-1"></i> Submit
        </button>
      </div>
    </div>
  </div>
</div>

 <footer>
    <p>&copy; 2025 Mana Kovvali. All rights reserved.</p>
    <img
      src="https://visitor-badge.laobi.icu/badge?page_id=manoj7573.manakovvali"
      alt="visitor count badge"
    />
  </footer>

<script>
const webAppUrl = "https://script.google.com/macros/s/AKfycby8Z4KnDPvps6PGZosozwIDCvXZA3WFdgaxKqSCc6BD-clb8In46_5289f2iflutP41/exec";

// Load gallery
async function loadGallery() {
  try {
    const res = await fetch(webAppUrl);
    const data = await res.json();
    const gallery = document.getElementById('gallery');
    gallery.innerHTML = '';
    if (data.length === 0) {
      gallery.innerHTML = '<p>No uploads yet.</p>';
    }
    data.reverse().forEach(item => {
      gallery.innerHTML += `
        <div class="card">
          <img src="${item.imageUrl}" alt="${item.name}">
          <p><b>${item.name}</b></p>
          <p>${item.contact}</p>
        </div>
      `;
    });
  } catch (err) {
    console.error(err);
  }
}
loadGallery();

// Auto-refresh every 5 Min
setInterval(loadGallery, 5000*60);

// Submit form
document.getElementById('uploadForm').addEventListener('submit', async (e) => {
  e.preventDefault();
  const name = document.getElementById('name').value;
  const contact = document.getElementById('contact').value;
  const imageFile = document.getElementById('image').files[0];

  const reader = new FileReader();
  reader.onload = async function() {
    const base64Image = reader.result;
    await fetch(webAppUrl, {
      method: 'POST',
      body: JSON.stringify({ name, contact, image: base64Image })
    });
    alert("Image uploaded Successfully!");
    document.getElementById('uploadForm').reset();
  };
  reader.readAsDataURL(imageFile);
});
</script>

</body>
</html>
